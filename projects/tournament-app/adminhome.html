<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Tournament Arena</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .admin-sidebar {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        }
        .admin-card {
            transition: all 0.3s ease;
        }
        .admin-card:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="bg-gray-50 font-inter">
    <!-- Admin Sidebar -->
    <div class="fixed left-0 top-0 h-full w-64 admin-sidebar text-white transform -translate-x-full md:translate-x-0 transition-transform duration-300 z-40" id="admin-sidebar">
        <div class="p-6">
            <div class="flex items-center space-x-3 mb-8">
                <i class="fas fa-shield-alt text-2xl text-red-400"></i>
                <div>
                    <h1 class="text-xl font-bold">Admin Panel</h1>
                    <p class="text-xs text-gray-400">Tournament Arena</p>
                </div>
            </div>
            
            <nav class="space-y-2">
                <a href="adminhome.html" class="flex items-center space-x-3 p-3 rounded-lg bg-white bg-opacity-10 text-white">
                    <i class="fas fa-tachometer-alt w-5"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" onclick="showUserManagement()" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-colors">
                    <i class="fas fa-users w-5"></i>
                    <span>User Management</span>
                </a>
                <a href="#" onclick="showTournamentManagement()" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-colors">
                    <i class="fas fa-trophy w-5"></i>
                    <span>Tournaments</span>
                </a>
                <a href="#" onclick="showTransactionManagement()" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-colors">
                    <i class="fas fa-credit-card w-5"></i>
                    <span>Transactions</span>
                </a>
                <a href="#" onclick="showReports()" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-colors">
                    <i class="fas fa-chart-bar w-5"></i>
                    <span>Reports</span>
                </a>
                <a href="#" onclick="showSettings()" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-white hover:bg-opacity-10 transition-colors">
                    <i class="fas fa-cog w-5"></i>
                    <span>Settings</span>
                </a>
                <div class="border-t border-gray-600 pt-4 mt-4">
                    <button onclick="handleAdminLogout()" class="flex items-center space-x-3 p-3 rounded-lg hover:bg-red-600 transition-colors w-full text-left">
                        <i class="fas fa-sign-out-alt w-5"></i>
                        <span>Logout</span>
                    </button>
                </div>
            </nav>
        </div>
    </div>

    <!-- Main Content -->
    <div class="md:ml-64 min-h-screen">
        <!-- Top Header -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="flex items-center justify-between p-4">
                <div class="flex items-center space-x-4">
                    <button class="md:hidden text-gray-600" onclick="toggleAdminSidebar()">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <h1 class="text-2xl font-bold text-gray-800">Admin Dashboard</h1>
                </div>
                
                <div class="flex items-center space-x-4">
                    <!-- Search -->
                    <div class="relative hidden sm:block">
                        <input type="text" placeholder="Search..." 
                               class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500 w-64">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    
                    <!-- Notifications -->
                    <button class="relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full">
                        <i class="fas fa-bell text-xl"></i>
                        <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">5</span>
                    </button>
                    

                    <!-- Admin Profile -->
                    <div class="flex items-center space-x-3">
                        <img src="https://ui-avatars.com/api/?name=Admin&background=dc2626&color=fff" alt="Admin" class="w-10 h-10 rounded-full">
                        <div class="hidden sm:block">
                            <p class="font-semibold text-gray-800">Administrator</p>
                            <p class="text-sm text-gray-500">Super Admin</p>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Dashboard Content -->
        <main class="p-6">
            <!-- Stats Overview -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="admin-card bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-sm">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-blue-100 text-sm">Total Users</p>
                            <p class="text-3xl font-bold" id="total-users">2,847</p>
                            <p class="text-blue-100 text-xs mt-1">↗ +12% this month</p>
                        </div>
                        <div class="bg-white bg-opacity-20 p-3 rounded-full">
                            <i class="fas fa-users text-2xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="admin-card bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-xl shadow-sm">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-green-100 text-sm">Active Tournaments</p>
                            <p class="text-3xl font-bold" id="active-tournaments">24</p>
                            <p class="text-green-100 text-xs mt-1">↗ +3 from yesterday</p>
                        </div>
                        <div class="bg-white bg-opacity-20 p-3 rounded-full">
                            <i class="fas fa-trophy text-2xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="admin-card bg-gradient-to-r from-yellow-500 to-yellow-600 text-white p-6 rounded-xl shadow-sm">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-yellow-100 text-sm">Revenue Today</p>
                            <p class="text-3xl font-bold" id="revenue-today">₹45,230</p>
                            <p class="text-yellow-100 text-xs mt-1">↗ +8% from avg</p>
                        </div>
                        <div class="bg-white bg-opacity-20 p-3 rounded-full">
                            <i class="fas fa-rupee-sign text-2xl"></i>
                        </div>
                    </div>
                </div>
                
                <div class="admin-card bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-xl shadow-sm">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-red-100 text-sm">Pending Issues</p>
                            <p class="text-3xl font-bold" id="pending-issues">7</p>
                            <p class="text-red-100 text-xs mt-1">2 critical</p>
                        </div>
                        <div class="bg-white bg-opacity-20 p-3 rounded-full">
                            <i class="fas fa-exclamation-triangle text-2xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <button onclick="createTournament()" class="admin-card bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow group text-left">
                    <div class="flex items-center space-x-4">
                        <div class="bg-blue-100 p-3 rounded-full group-hover:bg-blue-200 transition-colors">
                            <i class="fas fa-plus text-blue-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-800">Create Tournament</h3>
                            <p class="text-gray-500 text-sm">Start a new tournament</p>
                        </div>
                    </div>
                </button>
                
                <button onclick="sendAnnouncement()" class="admin-card bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow group text-left">
                    <div class="flex items-center space-x-4">
                        <div class="bg-green-100 p-3 rounded-full group-hover:bg-green-200 transition-colors">
                            <i class="fas fa-bullhorn text-green-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-800">Send Announcement</h3>
                            <p class="text-gray-500 text-sm">Notify all users</p>
                        </div>
                    </div>
                </button>
                
                <button onclick="viewReports()" class="admin-card bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow group text-left">
                    <div class="flex items-center space-x-4">
                        <div class="bg-purple-100 p-3 rounded-full group-hover:bg-purple-200 transition-colors">
                            <i class="fas fa-chart-line text-purple-600 text-xl"></i>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-800">Generate Report</h3>
                            <p class="text-gray-500 text-sm">Analytics & insights</p>
                        </div>
                    </div>
                </button>
            </div>

            <!-- Recent Activity & Management Panels -->
            <div class="grid lg:grid-cols-2 gap-6">
                <!-- Recent Users -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-800">Recent Users</h2>
                            <button onclick="showUserManagement()" class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                                View All
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <div id="recent-users" class="space-y-4">
                            <!-- Users will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Active Tournaments -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-semibold text-gray-800">Active Tournaments</h2>
                            <button onclick="showTournamentManagement()" class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                                Manage All
                            </button>
                        </div>
                    </div>
                    <div class="p-6">
                        <div id="active-tournaments-list" class="space-y-4">
                            <!-- Tournaments will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js"></script>
    <script>
        // Check admin authentication
        document.addEventListener('DOMContentLoaded', () => {
            const adminSession = localStorage.getItem('adminSession');
            if (!adminSession) {
                window.location.href = 'adminauth.html';
                return;
            }

            // Initialize theme toggle
            // Initialize theme removed - using light mode only
            
            // Load dashboard data
            loadDashboardData();
        });

        function loadDashboardData() {
            loadRecentUsers();
            loadActiveTournaments();
            
            // Simulate real-time updates
            setInterval(updateStats, 30000); // Update every 30 seconds
        }

        function loadRecentUsers() {
            const container = document.getElementById('recent-users');
            const sampleUsers = [
                { name: 'John Doe', email: 'john@email.com', joined: '2 min ago', status: 'active' },
                { name: 'Jane Smith', email: 'jane@email.com', joined: '5 min ago', status: 'active' },
                { name: 'Mike Johnson', email: 'mike@email.com', joined: '1 hour ago', status: 'inactive' },
                { name: 'Sarah Wilson', email: 'sarah@email.com', joined: '2 hours ago', status: 'active' }
            ];

            container.innerHTML = sampleUsers.map(user => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div class="flex items-center space-x-3">
                        <img src="${Utils.generateAvatar(user.name)}" alt="${user.name}" class="w-10 h-10 rounded-full">
                        <div>
                            <p class="font-medium text-gray-800">${user.name}</p>
                            <p class="text-sm text-gray-500">${user.email}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-sm text-gray-600">${user.joined}</p>
                        <span class="inline-block w-2 h-2 rounded-full ${user.status === 'active' ? 'bg-green-400' : 'bg-gray-400'}"></span>
                    </div>
                </div>
            `).join('');
        }

        function loadActiveTournaments() {
            const container = document.getElementById('active-tournaments-list');
            const tournaments = [
                { name: 'Free Fire Championship', players: '85/100', status: 'live', prize: '₹5,000' },
                { name: 'PUBG Squad Battle', players: '64/64', status: 'full', prize: '₹10,000' },
                { name: 'Ludo Tournament', players: '32/50', status: 'open', prize: '₹2,500' }
            ];

            container.innerHTML = tournaments.map(tournament => `
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                    <div>
                        <p class="font-medium text-gray-800">${tournament.name}</p>
                        <p class="text-sm text-gray-500">Players: ${tournament.players}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm font-medium text-green-600">${tournament.prize}</p>
                        <span class="inline-block px-2 py-1 text-xs rounded-full ${getStatusClass(tournament.status)}">
                            ${tournament.status.toUpperCase()}
                        </span>
                    </div>
                </div>
            `).join('');
        }

        function getStatusClass(status) {
            switch (status) {
                case 'live': return 'bg-green-100 text-green-800';
                case 'full': return 'bg-red-100 text-red-800';
                case 'open': return 'bg-blue-100 text-blue-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function updateStats() {
            // Simulate real-time stat updates
            const totalUsers = document.getElementById('total-users');
            const activeTournaments = document.getElementById('active-tournaments');
            const revenueToday = document.getElementById('revenue-today');
            const pendingIssues = document.getElementById('pending-issues');

            // Random updates for demo
            totalUsers.textContent = (parseInt(totalUsers.textContent.replace(',', '')) + Math.floor(Math.random() * 5)).toLocaleString();
            revenueToday.textContent = '₹' + (parseInt(revenueToday.textContent.replace('₹', '').replace(',', '')) + Math.floor(Math.random() * 1000)).toLocaleString();
        }

        function toggleAdminSidebar() {
            const sidebar = document.getElementById('admin-sidebar');
            sidebar.classList.toggle('-translate-x-full');
        }

        function showUserManagement() {
            Utils.showToast('Opening User Management...', 'info');
            // Implementation for user management panel
        }

        function showTournamentManagement() {
            Utils.showToast('Opening Tournament Management...', 'info');
            // Implementation for tournament management
        }

        function showTransactionManagement() {
            Utils.showToast('Opening Transaction Management...', 'info');
            // Implementation for transaction management
        }

        function showReports() {
            Utils.showToast('Opening Reports...', 'info');
            // Implementation for reports
        }

        function showSettings() {
            Utils.showToast('Opening Settings...', 'info');
            // Implementation for settings
        }

        function createTournament() {
            Utils.showToast('Opening Tournament Creator...', 'info');
            // Implementation for tournament creation
        }

        function sendAnnouncement() {
            Utils.showToast('Opening Announcement Tool...', 'info');
            // Implementation for announcements
        }

        function viewReports() {
            Utils.showToast('Opening Report Generator...', 'info');
            // Implementation for report viewing
        }

        function handleAdminLogout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('adminSession');
                Utils.showToast('Logged out successfully', 'success');
                setTimeout(() => {
                    window.location.href = 'adminauth.html';
                }, 1000);
            }
        }

        // Back to top button functionality
        document.addEventListener('DOMContentLoaded', () => {
            const backToTopButton = document.getElementById('back-to-top');
            
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTopButton.classList.remove('opacity-0', 'invisible', 'translate-y-4');
                    backToTopButton.classList.add('opacity-100', 'visible', 'translate-y-0');
                } else {
                    backToTopButton.classList.add('opacity-0', 'invisible', 'translate-y-4');
                    backToTopButton.classList.remove('opacity-100', 'visible', 'translate-y-0');
                }
            });
            
            backToTopButton.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        });
    </script>

    <!-- Back to Top Button -->
    <button id="back-to-top" class="fixed bottom-6 right-6 bg-red-600 hover:bg-red-700 text-white p-3 shadow-lg transition-all duration-300 opacity-0 invisible transform translate-y-4 z-50" style="border-radius: 50%;">
        <i class="fas fa-chevron-up text-lg"></i>
    </button>
</body>
</html>